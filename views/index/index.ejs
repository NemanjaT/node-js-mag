<% include ../partials/header %>
<div class="search-box col-md-12 col-sm-12 col-xs-12">
	<div class="form-group">
		<label for="product">Proizvod:</label>
		<input type="text" name="product" id="product" class="form-control" placeholder="npr. Samsung, LG Spirit 4S..." autofocus />
	</div>
	<div class="form-group">
		<label for="location">Lokacija:</label>
		<input type="text" name="location" id="location" class="form-control" placeholder="Beograd" />
	</div>
	<span id="btn" class="glyphicon glyphicon-chevron-down"></span>
	<div class="form-group shrinked up" id="more-info">
		<div class="form-group">
			<label for="price-range">Cena (&euro;):</label>
			<br/>Od <input type="number" name="price-range1" id="price-range" class="form-control small" min="0" step="10" /> 
			do <input type="number" name="price-range2" class="form-control small" min="0" step="10" />
		</div>
		<div class="form-group">
			<input type="checkbox" name="has-image" id="has-image">
			<label for="has-image">Mora imati sliku</label>
		</div>
	</div>
</div>
<div ng-view>
	<!-- angular-view -->
</div>

<script type="text/javascript">
$(function() {
	var shrinkBtn    = document.getElementById('btn');
	var moreInfoBox  = document.getElementById('more-info');
	var productInput = document.getElementById('product');

	var DomManipulation = {
		toggleExtraInfo: function( item ) {
			if (item.classList.contains('shrinked'))
				item.classList.add('shrinked');
			if (!item.classList.contains('up') && !item.classList.contains('down'))
				item.classList.add('up');
			item.classList.toggle('up');
			item.classList.toggle('down');
		},
		rotateGlyphicon: function( glyph ) {
			if (! glyph.classList.contains('glyphicon')) {
				console.error('Glyphicon missing!');
				return;
			}
			glyph.classList.toggle('rotated');
		}
	};

	$('.search-box').offset({
		top: window.innerHeight / 2 - 100
	});

	shrinkBtn.addEventListener('click', function() {
		DomManipulation.toggleExtraInfo(moreInfoBox);
		DomManipulation.rotateGlyphicon(shrinkBtn);
	});

	productInput.addEventListener('keypress', function(e) {
		if(e.which == 13) {
			$('.search-box')[0].style.top = 0;
			$('.search-box')[0].addEventListener('transitionend', function() {
				$('.container')[0].classList.remove('hidden');
				$('.container')[0].classList.add('show');
			});
		}
	});
});
</script>

<% include ../partials/footer %>